# 摘要

sketch检测数据包时：

- 固定大小的内存
- 误差有限

缺点，高流量负载下性能下降。



**提出网络测量框架：sketchVisor**

在高负载下激活快速路径，提供高性能的局部测量，而精度略有下降。

通过压缩感知，恢复全网测量结果。



# 1 Introduction

软件数据包处理是现代数据中心网络的重要支柱。它强调可编程性和可扩展性，从而支持新的网络管理功能。

网络测量对于管理软件数据包处理平台至关重要。其目标是收集基本的网络流量统计信息（例如，heavy hitters，流量异常，流量分配和流量熵），以帮助网络运营商在流量工程，性能诊断和攻击防范方面做出更好的网络管理决策

现有的软件交换机在数据包采样上测量精度较低，如果要通过提高采样率甚至是记录所有流量来提高测量精度，资源消耗过多，高速网络中可扩展性差。

---

sketch，细粒度测量，是紧凑的数据结构，可以以固定的存储空间去汇总所有数据包的流量统计信息，而仅产生有限的错误

sketch实际上消耗了大量的CPU资源。基于sketch的测量需要过多的CPU资源来满足线速要求

>根本原因是草图只是图元。尽管它们在设计上既简单高效，但将其应用到实际网络测量中却需要额外的扩展或组件，这些扩展或组件通常会导致大量的计算

基于以上原因，我们不仅要求测量解决方案在高流量负载下具有资源效率，而且要准确地推断出高流量负载的行为。

---

sketchvisor高健壮性的网络测量框架。

>健壮性：即使在高流量负载下，SketchVisor仍可以保持高（甚至是线速）性能和高精度，以进行全网范围的测量。 

SketchVisor并未提出新的sketch设计，而是使用单独的数据路径（称为快速路径）扩展了现有的基于草图的解决方案，来测量高流量负载，精度稍有下降。

此后，它可以从基于草图的测量和快速路径测量中准确地恢复整个网络的测量结果。

---

SketchVisor在网络中的软件交换机之间部署了分布式数据平面，每个交换机部署独立的sketch来处理数据包，并在任务超载且无法处理这些任务时将过多的数据包重定向到快速路径高速分组。

快速路径中设计新的top-k算法，跟踪大流量

维护一个全局计数器，统计进入快速路径的流量，也可以捕获小流量的总体特征。

>Notes:快速路径通常可以支持为不同类型的流量统计信息设计的各种测量任务。



SketchVisor部署了一个集中式控制平面，合并来自所有软件交换机的本地测量结果（基于sketch和快速路径的测量）

快速路径可能会丢失信息，所以利用矩阵插值，使得控制平面能够通过压缩感知来恢复丢失的信息。

---

SketchVisor都具有单个CPU内核，并且在快速路径中只有几KB的内存，可以达到17Gbps以上的吞吐量，并且具有接近最佳的精度。



# 2 BACKGROUND AND MOTIVATION  

## Network Measurement  